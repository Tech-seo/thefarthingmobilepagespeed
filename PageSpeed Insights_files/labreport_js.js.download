/*

 The MIT License (MIT)
 Copyright (c) 2018 Javan Makhmali

 Permission is hereby granted, free of charge, to any person obtaining a copy
 of this software and associated documentation files (the "Software"), to deal
 in the Software without restriction, including without limitation the rights
 to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 copies of the Software, and to permit persons to whom the Software is
 furnished to do so, subject to the following conditions:

 The above copyright notice and this permission notice shall be included in
 all copies or substantial portions of the Software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 THE SOFTWARE.

 /

/*
Details Element Polyfill 2.4.0
Copyright ? 2019 Javan Makhmali
*/
(function(){function a(){var l=document.createElement("details").constructor.prototype,m=l.setAttribute,r=l.removeAttribute,w=Object.getOwnPropertyDescriptor(l,"open");Object.defineProperties(l,{open:{get:function(){if("DETAILS"==this.tagName)return this.hasAttribute("open");if(w&&w.get)return w.get.call(this)},set:function(u){if("DETAILS"==this.tagName)return u?this.setAttribute("open",""):this.removeAttribute("open");if(w&&w.set)return w.set.call(this,u)}},setAttribute:{value:function(u,y){var x=
this;if("open"==u&&"DETAILS"==this.tagName){var z=this.hasAttribute("open");u=m.call(x,u,y);z||((z=this.querySelector("summary"))&&z.setAttribute("aria-expanded",!0),k(this));return u}return m.call(x,u,y)}},removeAttribute:{value:function(u){var y=this;if("open"==u&&"DETAILS"==this.tagName){var x=this.hasAttribute("open");u=r.call(y,u);x&&((x=this.querySelector("summary"))&&x.setAttribute("aria-expanded",!1),k(this));return u}return r.call(y,u)}}})}function b(){g(function(l){l.hasAttribute("open")?
l.removeAttribute("open"):l.setAttribute("open","")})}function c(){window.MutationObserver?(new MutationObserver(function(l){v.call(l,function(m){var r=m.target;m=m.attributeName;"DETAILS"==r.tagName&&"open"==m&&k(r)})})).observe(document.documentElement,{attributes:!0,subtree:!0}):g(function(l){var m=l.getAttribute("open");setTimeout(function(){var r=l.getAttribute("open");m!=r&&k(l)},1)})}function d(){e(document);window.MutationObserver?(new MutationObserver(function(l){v.call(l,function(m){v.call(m.addedNodes,
e)})})).observe(document.documentElement,{subtree:!0,childList:!0}):document.addEventListener("DOMNodeInserted",function(l){e(l.target)})}function e(l){n(l,"SUMMARY").forEach(function(m){var r=q(m,"DETAILS");m.setAttribute("aria-expanded",r.hasAttribute("open"));m.hasAttribute("tabindex")||m.setAttribute("tabindex","0");m.hasAttribute("role")||m.setAttribute("role","button")})}function f(l){return!(l.defaultPrevented||l.ctrlKey||l.metaKey||l.shiftKey||l.target.isContentEditable)}function g(l){window.addEventListener("click",
function(m){f(m)&&1>=m.which&&(m=q(m.target,"SUMMARY"))&&m.parentNode&&"DETAILS"==m.parentNode.tagName&&l(m.parentNode)},!1);window.addEventListener("keydown",function(m){if(f(m)&&(13==m.keyCode||32==m.keyCode)){var r=q(m.target,"SUMMARY");r&&r.parentNode&&"DETAILS"==r.parentNode.tagName&&(l(r.parentNode),m.preventDefault())}},!1)}function k(l){var m=document.createEvent("Event");m.initEvent("toggle",!1,!1);l.dispatchEvent(m)}function n(l,m){return(l.tagName==m?[l]:[]).concat("function"==typeof l.getElementsByTagName?
A.call(l.getElementsByTagName(m)):[])}function q(l,m){if("function"==typeof l.closest)return l.closest(m);for(;l;){if(l.tagName==m)return l;l=l.parentNode}}var h=document.createElement("details"),p="undefined"!=typeof HTMLDetailsElement&&h instanceof HTMLDetailsElement;h={open:"open"in h||p,toggle:"ontoggle"in h};var t=[],v=t.forEach,A=t.slice;h.open||(document.head.insertAdjacentHTML("afterbegin",'<style>\ndetails, summary {\n  display: block;\n}\ndetails:not([open]) > *:not(summary) {\n  display: none;\n}\nsummary::before {\n  content: "\u25ba";\n  padding-right: 0.3rem;\n  font-size: 0.6rem;\n  cursor: default;\n}\n[open] > summary::before {\n  content: "\u25bc";\n}\n</style>'),
a(),b(),d());h.open&&!h.toggle&&c()})();/*

 Copyright 2017 The Lighthouse Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS-IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
const RATINGS={PASS:{label:"pass",minScore:.9},AVERAGE:{label:"average",minScore:.5},FAIL:{label:"fail"},ERROR:{label:"error"}};
class Util{static prepareReportResult(a){const b=JSON.parse(JSON.stringify(a));b.configSettings.locale||(b.configSettings.locale="en");b.configSettings.formFactor||(b.configSettings.formFactor=b.configSettings.emulatedFormFactor);for(const c of Object.values(b.audits)){if("not_applicable"===c.scoreDisplayMode||"not-applicable"===c.scoreDisplayMode)c.scoreDisplayMode="notApplicable";if(c.details){if(void 0===c.details.type||"diagnostic"===c.details.type)c.details.type="debugdata";if("filmstrip"===
c.details.type)for(const d of c.details.items)d.data.startsWith("data:image/jpeg;base64,")||(d.data="data:image/jpeg;base64,"+d.data)}}if("object"!==typeof b.categories)throw Error("No categories provided.");for(const c of Object.values(b.categories))c.auditRefs.forEach(d=>{const e=b.audits[d.id];d.result=e;b.stackPacks&&b.stackPacks.forEach(f=>{f.descriptions[d.id]&&(d.stackPacks=d.stackPacks||[],d.stackPacks.push({title:f.title,iconDataURL:f.iconDataURL,description:f.descriptions[d.id]}))})});return b}static showAsPassed(a){switch(a.scoreDisplayMode){case "manual":case "notApplicable":return!0;
case "error":case "informative":return!1;default:return Number(a.score)>=RATINGS.PASS.minScore}}static calculateRating(a,b){if("manual"===b||"notApplicable"===b)return RATINGS.PASS.label;if("error"===b)return RATINGS.ERROR.label;if(null===a)return RATINGS.FAIL.label;b=RATINGS.FAIL.label;a>=RATINGS.PASS.minScore?b=RATINGS.PASS.label:a>=RATINGS.AVERAGE.minScore&&(b=RATINGS.AVERAGE.label);return b}static splitMarkdownCodeSpans(a){const b=[];a=a.split(/`(.*?)`/g);for(let c=0;c<a.length;c++){const d=a[c];
if(!d)continue;const e=0!==c%2;b.push({isCode:e,text:d})}return b}static splitMarkdownLink(a){const b=[];for(a=a.split(/\[([^\]]+?)\]\((https?:\/\/.*?)\)/g);a.length;){const [c,d,e]=a.splice(0,3);c&&b.push({isLink:!1,text:c});d&&e&&b.push({isLink:!0,text:d,linkHref:e})}return b}static getURLDisplayName(a,b){b=b||{numPathParts:void 0,preserveQuery:void 0,preserveHost:void 0};const c=void 0!==b.numPathParts?b.numPathParts:2,d=void 0!==b.preserveQuery?b.preserveQuery:!0,e=b.preserveHost||!1;if("about:"===
a.protocol||"data:"===a.protocol)b=a.href;else{b=a.pathname;const f=b.split("/").filter(g=>g.length);c&&f.length>c&&(b="\u2026"+f.slice(-1*c).join("/"));e&&(b=`${a.host}/${b.replace(/^\//,"")}`);d&&(b=`${b}${a.search}`)}b=b.replace(/([a-f0-9]{7})[a-f0-9]{13}[a-f0-9]*/g,"$1\u2026");b=b.replace(/([a-zA-Z0-9-_]{9})(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])[a-zA-Z0-9-_]{10,}/g,"$1\u2026");b=b.replace(/(\d{3})\d{6,}/g,"$1\u2026");b=b.replace(/\u2026+/g,"\u2026");64<b.length&&b.includes("?")&&(b=b.replace(/\?([^=]*)(=)?.*/,
"?$1$2\u2026"),64<b.length&&(b=b.replace(/\?.*/,"?\u2026")));64<b.length&&(a=b.lastIndexOf("."),b=0<=a?b.slice(0,63-(b.length-a))+`${"\u2026"}${b.slice(a)}`:b.slice(0,63)+"\u2026");return b}static parseURL(a){a=new URL(a);return{file:Util.getURLDisplayName(a),hostname:a.hostname,origin:a.origin}}static getEnvironmentDisplayValues(a){a=Util.getEmulationDescriptions(a);return[{name:Util.i18n.strings.runtimeSettingsDevice,description:a.deviceEmulation},{name:Util.i18n.strings.runtimeSettingsNetworkThrottling,
description:a.networkThrottling},{name:Util.i18n.strings.runtimeSettingsCPUThrottling,description:a.cpuThrottling}]}static getEmulationDescriptions(a){let b;var c=a.throttling;switch(a.throttlingMethod){case "provided":c=b=Util.i18n.strings.throttlingProvided;break;case "devtools":{const {cpuSlowdownMultiplier:d,requestLatencyMs:e}=c;b=`${Util.i18n.formatNumber(d)}x slowdown (DevTools)`;c=`${Util.i18n.formatNumber(e)}${"\u00a0"}ms HTTP RTT, `+`${Util.i18n.formatNumber(c.downloadThroughputKbps)}${"\u00a0"}Kbps down, `+
`${Util.i18n.formatNumber(c.uploadThroughputKbps)}${"\u00a0"}Kbps up (DevTools)`;break}case "simulate":{const {cpuSlowdownMultiplier:d,rttMs:e,throughputKbps:f}=c;b=`${Util.i18n.formatNumber(d)}x slowdown (Simulated)`;c=`${Util.i18n.formatNumber(e)}${"\u00a0"}ms TCP RTT, `+`${Util.i18n.formatNumber(f)}${"\u00a0"}Kbps throughput (Simulated)`;break}default:c=b=Util.i18n.strings.runtimeUnknown}a={mobile:Util.i18n.strings.runtimeMobileEmulation,desktop:Util.i18n.strings.runtimeDesktopEmulation}[a.formFactor]||
Util.i18n.strings.runtimeNoEmulation;return{deviceEmulation:a,cpuThrottling:b,networkThrottling:c}}static filterRelevantLines(a,b,c){if(0===b.length)return a.slice(0,2*c+1);const d=new Set;b=b.sort((e,f)=>(e.lineNumber||0)-(f.lineNumber||0));b.forEach(({lineNumber:e})=>{var f=e-c;for(e+=c;1>f;)f++,e++;for(d.has(f-3-1)&&(f-=3);f<=e;f++){const g=f;d.add(g)}});return a.filter(e=>d.has(e.lineNumber))}static isPluginCategory(a){return a.startsWith("lighthouse-plugin-")}}Util.reportJson=null;
Util.getUniqueSuffix=(()=>{let a=0;return function(){return a++}})();Util.i18n=null;
Util.UIStrings={varianceDisclaimer:"Values are estimated and may vary. The [performance score is calculated](https://web.dev/performance-scoring/) directly from these metrics.",calculatorLink:"See calculator.",opportunityResourceColumnLabel:"Opportunity",opportunitySavingsColumnLabel:"Estimated Savings",errorMissingAuditInfo:"Report error: no audit information",errorLabel:"Error!",warningHeader:"Warnings: ",warningAuditsGroupTitle:"Passed audits but with warnings",passedAuditsGroupTitle:"Passed audits",
notApplicableAuditsGroupTitle:"Not applicable",manualAuditsGroupTitle:"Additional items to manually check",toplevelWarningsMessage:"There were issues affecting this run of Lighthouse:",crcInitialNavigation:"Initial Navigation",crcLongestDurationLabel:"Maximum critical path latency:",snippetExpandButtonLabel:"Expand snippet",snippetCollapseButtonLabel:"Collapse snippet",lsPerformanceCategoryDescription:"[Lighthouse](https://developers.google.com/web/tools/lighthouse/) analysis of the current page on an emulated mobile network. Values are estimated and may vary.",
labDataTitle:"Lab Data",thirdPartyResourcesLabel:"Show 3rd-party resources",dropdownPrintSummary:"Print Summary",dropdownPrintExpanded:"Print Expanded",dropdownCopyJSON:"Copy JSON",dropdownSaveHTML:"Save as HTML",dropdownSaveJSON:"Save as JSON",dropdownViewer:"Open in Viewer",dropdownSaveGist:"Save as Gist",dropdownDarkTheme:"Toggle Dark Theme",runtimeSettingsTitle:"Runtime Settings",runtimeSettingsUrl:"URL",runtimeSettingsFetchTime:"Fetch Time",runtimeSettingsDevice:"Device",runtimeSettingsNetworkThrottling:"Network throttling",
runtimeSettingsCPUThrottling:"CPU throttling",runtimeSettingsChannel:"Channel",runtimeSettingsUA:"User agent (host)",runtimeSettingsUANetwork:"User agent (network)",runtimeSettingsBenchmark:"CPU/Memory Power",runtimeSettingsAxeVersion:"Axe version",footerIssue:"File an issue",runtimeNoEmulation:"No emulation",runtimeMobileEmulation:"Emulated Moto G4",runtimeDesktopEmulation:"Emulated Desktop",runtimeUnknown:"Unknown",throttlingProvided:"Provided by environment"};
"undefined"!==typeof module&&module.exports?module.exports=Util:self.Util=Util;class DOM{constructor(a){this._document=a;this._lighthouseChannel="unknown"}createElement(a,b,c={}){const d=this._document.createElement(a);b&&(d.className=b);Object.keys(c).forEach(e=>{const f=c[e];"undefined"!==typeof f&&d.setAttribute(e,f)});return d}createElementNS(a,b,c,d={}){const e=this._document.createElementNS(a,b);c&&(e.className=c);Object.keys(d).forEach(f=>{const g=d[f];"undefined"!==typeof g&&e.setAttribute(f,g)});return e}createFragment(){return this._document.createDocumentFragment()}createChildOf(a,
b,c,d){b=this.createElement(b,c,d);a.appendChild(b);return b}cloneTemplate(a,b){b=b.querySelector(a);if(!b)throw Error(`Template not found: template${a}`);a=this._document.importNode(b.content,!0);b.hasAttribute("data-stamped")&&this.findAll("style",a).forEach(c=>c.remove());b.setAttribute("data-stamped","true");return a}resetTemplates(){this.findAll("template[data-stamped]",this._document).forEach(a=>{a.removeAttribute("data-stamped")})}convertMarkdownLinkSnippets(a){const b=this.createElement("span");
for(const d of Util.splitMarkdownLink(a))if(d.isLink){a=new URL(d.linkHref);var c=["https://developers.google.com","https://web.dev"];c.includes(a.origin)&&(a.searchParams.set("utm_source","lighthouse"),a.searchParams.set("utm_medium",this._lighthouseChannel));c=this.createElement("a");c.rel="noopener";c.target="_blank";c.textContent=d.text;c.href=a.href;b.appendChild(c)}else b.appendChild(this._document.createTextNode(d.text));return b}convertMarkdownCodeSnippets(a){const b=this.createElement("span");
for(const c of Util.splitMarkdownCodeSpans(a))c.isCode?(a=this.createElement("code"),a.textContent=c.text,b.appendChild(a)):b.appendChild(this._document.createTextNode(c.text));return b}document(){return this._document}isDevTools(){return!!this._document.querySelector(".lh-devtools")}find(a,b){b=b.querySelector(a);if(null===b)throw Error(`query ${a} not found`);return b}findAll(a,b){return a=Array.from(b.querySelectorAll(a))}}
"undefined"!==typeof module&&module.exports?module.exports=DOM:self.DOM=DOM;const URL_PREFIXES=["http://","https://","data:"];
class DetailsRenderer{constructor(a,b={}){this._dom=a;this._fullPageScreenshot=b.fullPageScreenshot}setTemplateContext(a){this._templateContext=a}render(a){switch(a.type){case "filmstrip":return this._renderFilmstrip(a);case "list":return this._renderList(a);case "table":return this._renderTable(a);case "criticalrequestchain":return CriticalRequestChainRenderer.render(this._dom,this._templateContext,a,this);case "opportunity":return this._renderTable(a);case "screenshot":case "debugdata":case "full-page-screenshot":return null;
default:return this._renderUnknown(a.type,a)}}_renderBytes(a){var b=Util.i18n.formatBytesToKiB(a.value,a.granularity);b=this._renderText(b);b.title=Util.i18n.formatBytes(a.value);return b}_renderMilliseconds(a){let b=Util.i18n.formatMilliseconds(a.value,a.granularity);"duration"===a.displayUnit&&(b=Util.i18n.formatDuration(a.value));return this._renderText(b)}renderTextURL(a){let b,c;try{var d=Util.parseURL(a);var e="/"===d.file?d.origin:d.file;b="/"===d.file||""===d.hostname?"":`(${d.hostname})`;
c=a}catch(f){e=a}d=this._dom.createElement("div","lh-text__url");d.appendChild(this._renderLink({text:e,url:a}));b&&(e=this._renderText(b),e.classList.add("lh-text__url-host"),d.appendChild(e));c&&(d.title=a,d.dataset.url=a);return d}_renderLink(a){var b=["https:","http:"];let c;try{c=new URL(a.url)}catch(d){}if(!c||!b.includes(c.protocol))return a=this._renderText(a.text),a.classList.add("lh-link"),a;b=this._dom.createElement("a");b.rel="noopener";b.target="_blank";b.textContent=a.text;b.href=c.href;
b.classList.add("lh-link");return b}_renderText(a){const b=this._dom.createElement("div","lh-text");b.textContent=a;return b}_renderNumeric(a){a=Util.i18n.formatNumber(a.value,a.granularity);const b=this._dom.createElement("div","lh-numeric");b.textContent=a;return b}_renderThumbnail(a){const b=this._dom.createElement("img","lh-thumbnail");b.src=a;b.title=a;b.alt="";return b}_renderUnknown(a,b){console.error(`Unknown details type: ${a}`,b);const c=this._dom.createElement("details","lh-unknown");this._dom.createChildOf(c,
"summary").textContent=`We don't know how to render audit details of type \`${a}\`. `+"The Lighthouse version that collected this data is likely newer than the Lighthouse version of the report renderer. Expand for the raw JSON.";this._dom.createChildOf(c,"pre").textContent=JSON.stringify(b,null,2);return c}_renderTableValue(a,b){if(void 0===a||null===a)return null;if("object"===typeof a)switch(a.type){case "code":return this._renderCode(a.value);case "link":return this._renderLink(a);case "node":return this.renderNode(a);
case "numeric":return this._renderNumeric(a);case "source-location":return this.renderSourceLocation(a);case "url":return this.renderTextURL(a.value);default:return this._renderUnknown(a.type,a)}switch(b.valueType){case "bytes":return a=Number(a),this._renderBytes({value:a,granularity:b.granularity});case "code":return b=String(a),this._renderCode(b);case "ms":return b={value:Number(a),granularity:b.granularity,displayUnit:b.displayUnit},this._renderMilliseconds(b);case "numeric":return a=Number(a),
this._renderNumeric({value:a,granularity:b.granularity});case "text":return b=String(a),this._renderText(b);case "thumbnail":return b=String(a),this._renderThumbnail(b);case "timespanMs":return b=Number(a),this._renderMilliseconds({value:b});case "url":{const c=String(a);return URL_PREFIXES.some(d=>c.startsWith(d))?this.renderTextURL(c):this._renderCode(c)}default:return this._renderUnknown(b.valueType,a)}}_getCanonicalizedHeadingsFromTable(a){return"opportunity"===a.type?a.headings:a.headings.map(b=>
this._getCanonicalizedHeading(b))}_getCanonicalizedHeading(a){let b;a.subItemsHeading&&(b=this._getCanonicalizedsubItemsHeading(a.subItemsHeading,a));return{key:a.key,valueType:a.itemType,subItemsHeading:b,label:a.text,displayUnit:a.displayUnit,granularity:a.granularity}}_getCanonicalizedsubItemsHeading(a,b){a.key||console.warn("key should not be null");return{key:a.key||"",valueType:a.itemType||b.itemType,granularity:a.granularity||b.granularity,displayUnit:a.displayUnit||b.displayUnit}}_getDerivedsubItemsHeading(a){return a.subItemsHeading?
{key:a.subItemsHeading.key||"",valueType:a.subItemsHeading.valueType||a.valueType,granularity:a.subItemsHeading.granularity||a.granularity,displayUnit:a.subItemsHeading.displayUnit||a.displayUnit,label:""}:null}_renderTableRow(a,b){const c=this._dom.createElement("tr");for(const d of b){if(!d||!d.key){this._dom.createChildOf(c,"td","lh-table-column--empty");continue}b=a[d.key];let e;void 0!==b&&null!==b&&(e=this._renderTableValue(b,d));e?(b=`lh-table-column--${d.valueType}`,this._dom.createChildOf(c,
"td",b).appendChild(e)):this._dom.createChildOf(c,"td","lh-table-column--empty")}return c}_renderTableRowsFromItem(a,b){const c=this._dom.createFragment();c.append(this._renderTableRow(a,b));if(!a.subItems)return c;b=b.map(this._getDerivedsubItemsHeading);if(!b.some(Boolean))return c;for(const d of a.subItems.items)a=this._renderTableRow(d,b),a.classList.add("lh-sub-item-row"),c.append(a);return c}_renderTable(a){if(!a.items.length)return this._dom.createElement("span");const b=this._dom.createElement("table",
"lh-table");var c=this._dom.createChildOf(b,"thead"),d=this._dom.createChildOf(c,"tr");c=this._getCanonicalizedHeadingsFromTable(a);for(var e of c){var f=e.valueType||"text";f=`lh-table-column--${f}`;const g=this._dom.createElement("div","lh-text");g.textContent=e.label;this._dom.createChildOf(d,"th",f).appendChild(g)}e=this._dom.createChildOf(b,"tbody");d=!0;for(const g of a.items){a=this._renderTableRowsFromItem(g,c);for(const k of this._dom.findAll("tr",a))k.classList.add(d?"lh-row--even":"lh-row--odd");
d=!d;e.append(a)}return b}_renderList(a){const b=this._dom.createElement("div","lh-list");a.items.forEach(c=>{c=SnippetRenderer.render(this._dom,this._templateContext,c,this);b.appendChild(c)});return b}renderNode(a){const b=this._dom.createElement("span","lh-node");if(a.nodeLabel){var c=this._dom.createElement("div");c.textContent=a.nodeLabel;b.appendChild(c)}a.snippet&&(c=this._dom.createElement("div"),c.classList.add("lh-node__snippet"),c.textContent=a.snippet,b.appendChild(c));a.selector&&(b.title=
a.selector);a.path&&b.setAttribute("data-path",a.path);a.selector&&b.setAttribute("data-selector",a.selector);a.snippet&&b.setAttribute("data-snippet",a.snippet);if(!this._fullPageScreenshot)return b;a=a.lhId&&this._fullPageScreenshot.nodes[a.lhId];if(!a||0===a.width||0===a.height)return b;c={width:147,height:100};(a=ElementScreenshotRenderer.render(this._dom,this._templateContext,this._fullPageScreenshot.screenshot,a,c))&&b.prepend(a);return b}renderSourceLocation(a){if(!a.url)return null;const b=
`${a.url}:${a.line+1}:${a.column}`;if(a.original){var c=a.original.file||"<unmapped>";c=`${c}:${a.original.line+1}:${a.original.column}`}if("network"===a.urlProvider&&c)c=this._renderLink({url:a.url,text:c}),c.title=`maps to generated location ${b}`;else if("network"!==a.urlProvider||c)if("comment"===a.urlProvider&&c)c=this._renderText(`${c} (from source map)`),c.title=`${b} (from sourceURL)`;else{if("comment"!==a.urlProvider||c)return null;c=this._renderText(`${b} (from sourceURL)`)}else c=this.renderTextURL(a.url),
this._dom.find(".lh-link",c).textContent+=`:${a.line+1}:${a.column}`;c.classList.add("lh-source-location");c.setAttribute("data-source-url",a.url);c.setAttribute("data-source-line",String(a.line));c.setAttribute("data-source-column",String(a.column));return c}_renderFilmstrip(a){const b=this._dom.createElement("div","lh-filmstrip");for(const c of a.items)a=this._dom.createChildOf(b,"div","lh-filmstrip__frame"),this._dom.createChildOf(a,"img","lh-filmstrip__thumbnail",{src:c.data,alt:"Screenshot"});
return b}_renderCode(a){const b=this._dom.createElement("pre","lh-code");b.textContent=a;return b}}"undefined"!==typeof module&&module.exports?module.exports=DetailsRenderer:self.DetailsRenderer=DetailsRenderer;class CriticalRequestChainRenderer{static initTree(a){var b=0;const c=Object.keys(a);0<c.length&&(b=a[c[0]],b=b.request.startTime);return{tree:a,startTime:b,transferSize:0}}static createSegment(a,b,c,d,e,f){const g=a[b];a=Object.keys(a);b=a.indexOf(b)===a.length-1;a=!!g.children&&0<Object.keys(g.children).length;e=Array.isArray(e)?e.slice(0):[];"undefined"!==typeof f&&e.push(!f);return{node:g,isLastChild:b,hasChildren:a,startTime:c,transferSize:d+g.request.transferSize,treeMarkers:e}}static createChainNode(a,
b,c,d){b=a.cloneTemplate("#tmpl-lh-crc__chains",b);a.find(".crc-node",b).setAttribute("title",c.node.request.url);const e=a.find(".crc-node__tree-marker",b);c.treeMarkers.forEach(g=>{g?e.appendChild(a.createElement("span","tree-marker vert")):e.appendChild(a.createElement("span","tree-marker"));e.appendChild(a.createElement("span","tree-marker"))});c.isLastChild?e.appendChild(a.createElement("span","tree-marker up-right")):e.appendChild(a.createElement("span","tree-marker vert-right"));e.appendChild(a.createElement("span",
"tree-marker right"));c.hasChildren?e.appendChild(a.createElement("span","tree-marker horiz-down")):e.appendChild(a.createElement("span","tree-marker right"));var f=c.node.request.url;f=d.renderTextURL(f);d=a.find(".crc-node__tree-value",b);d.appendChild(f);if(!c.hasChildren){const {startTime:g,endTime:k,transferSize:n}=c.node.request;c=a.createElement("span","crc-node__chain-duration");c.textContent=" - "+Util.i18n.formatMilliseconds(1E3*(k-g))+", ";f=a.createElement("span","crc-node__chain-duration");
f.textContent=Util.i18n.formatBytesToKiB(n,.01);d.appendChild(c);d.appendChild(f)}return b}static buildTree(a,b,c,d,e,f){d.appendChild(CriticalRequestChainRenderer.createChainNode(a,b,c,f));if(c.node.children)for(const g of Object.keys(c.node.children)){const k=CriticalRequestChainRenderer.createSegment(c.node.children,g,c.startTime,c.transferSize,c.treeMarkers,c.isLastChild);CriticalRequestChainRenderer.buildTree(a,b,k,d,e,f)}}static render(a,b,c,d){b=a.cloneTemplate("#tmpl-lh-crc",b);const e=a.find(".lh-crc",
b);a.find(".crc-initial-nav",b).textContent=Util.i18n.strings.crcInitialNavigation;a.find(".lh-crc__longest_duration_label",b).textContent=Util.i18n.strings.crcLongestDurationLabel;a.find(".lh-crc__longest_duration",b).textContent=Util.i18n.formatMilliseconds(c.longestChain.duration);const f=CriticalRequestChainRenderer.initTree(c.chains);for(const g of Object.keys(f.tree)){const k=CriticalRequestChainRenderer.createSegment(f.tree,g,f.startTime,f.transferSize);CriticalRequestChainRenderer.buildTree(a,
b,k,e,c,d)}return a.find(".lh-crc-container",b)}}"undefined"!==typeof module&&module.exports?module.exports=CriticalRequestChainRenderer:self.CriticalRequestChainRenderer=CriticalRequestChainRenderer;class CategoryRenderer{constructor(a,b){this.dom=a;this.detailsRenderer=b;this.templateContext=this.dom.document();this.detailsRenderer.setTemplateContext(this.templateContext)}get _clumpTitles(){return{warning:Util.i18n.strings.warningAuditsGroupTitle,manual:Util.i18n.strings.manualAuditsGroupTitle,passed:Util.i18n.strings.passedAuditsGroupTitle,notApplicable:Util.i18n.strings.notApplicableAuditsGroupTitle}}renderAudit(a){const b=this.dom.cloneTemplate("#tmpl-lh-audit",this.templateContext);return this.populateAuditValues(a,
b)}populateAuditValues(a,b){var c=Util.i18n.strings;const d=this.dom.find(".lh-audit",b);d.id=a.result.id;var e=a.result.scoreDisplayMode;a.result.displayValue&&(this.dom.find(".lh-audit__display-text",d).textContent=a.result.displayValue);const f=this.dom.find(".lh-audit__title",d);f.appendChild(this.dom.convertMarkdownCodeSnippets(a.result.title));this.dom.find(".lh-audit__description",d).appendChild(this.dom.convertMarkdownLinkSnippets(a.result.description));a.stackPacks&&a.stackPacks.forEach(g=>
{const k=this.dom.createElement("div");k.classList.add("lh-audit__stackpack");const n=this.dom.createElement("img");n.classList.add("lh-audit__stackpack__img");n.src=g.iconDataURL;n.alt=g.title;k.appendChild(n);k.appendChild(this.dom.convertMarkdownLinkSnippets(g.description));this.dom.find(".lh-audit__stackpacks",d).appendChild(k)});b=this.dom.find("details",d);if(a.result.details){const g=this.detailsRenderer.render(a.result.details);g&&(g.classList.add("lh-details"),b.appendChild(g))}this.dom.find(".lh-chevron-container",
d).appendChild(this._createChevron());this._setRatingClass(d,a.result.score,e);"error"===a.result.scoreDisplayMode?(d.classList.add("lh-audit--error"),e=this.dom.find(".lh-audit__display-text",d),e.textContent=c.errorLabel,e.classList.add("tooltip-boundary"),e=this.dom.createChildOf(e,"div","tooltip tooltip--error"),e.textContent=a.result.errorMessage||c.errorMissingAuditInfo):a.result.explanation&&(e=this.dom.createChildOf(f,"div","lh-audit-explanation"),e.textContent=a.result.explanation);a=a.result.warnings;
if(!a||0===a.length)return d;b=this.dom.find("summary",b);b=this.dom.createChildOf(b,"div","lh-warnings");this.dom.createChildOf(b,"span").textContent=c.warningHeader;if(1===a.length)b.appendChild(this.dom.document().createTextNode(a.join("")));else{c=this.dom.createChildOf(b,"ul");for(const g of a)a=this.dom.createChildOf(c,"li"),a.textContent=g}return d}_createChevron(){var a=this.dom.cloneTemplate("#tmpl-lh-chevron",this.templateContext);return a=this.dom.find("svg.lh-chevron",a)}_setRatingClass(a,
b,c){b=Util.calculateRating(b,c);a.classList.add(`lh-audit--${c.toLowerCase()}`);"informative"!==c&&a.classList.add(`lh-audit--${b}`);return a}renderCategoryHeader(a,b){const c=this.dom.cloneTemplate("#tmpl-lh-category-header",this.templateContext),d=this.dom.find(".lh-score__gauge",c);b=this.renderScoreGauge(a,b);d.appendChild(b);a.description&&(a=this.dom.convertMarkdownLinkSnippets(a.description),this.dom.find(".lh-category-header__description",c).appendChild(a));return c}renderAuditGroup(a){const b=
this.dom.createElement("div","lh-audit-group"),c=this.dom.createElement("div","lh-audit-group__header");this.dom.createChildOf(c,"span","lh-audit-group__title").textContent=a.title;a.description&&(a=this.dom.convertMarkdownLinkSnippets(a.description),a.classList.add("lh-audit-group__description"),c.appendChild(a));b.appendChild(c);return b}_renderGroupedAudits(a,b){var c=new Map;c.set("NotAGroup",[]);for(var d of a){a=d.group||"NotAGroup";const e=c.get(a)||[];e.push(d);c.set(a,e)}d=[];for(const [e,
f]of c)if("NotAGroup"===e)for(const g of f)d.push(this.renderAudit(g));else{c=b[e];c=this.renderAuditGroup(c);for(const g of f)c.appendChild(this.renderAudit(g));c.classList.add(`lh-audit-group--${e}`);d.push(c)}return d}renderUnexpandableClump(a,b){const c=this.dom.createElement("div");a=this._renderGroupedAudits(a,b);a.forEach(d=>c.appendChild(d));return c}renderClump(a,{auditRefs:b,description:c}){var d=this.dom.cloneTemplate("#tmpl-lh-clump",this.templateContext);d=this.dom.find(".lh-clump",d);
"warning"===a&&d.setAttribute("open","");var e=this.dom.find("div.lh-audit-group__summary",d);e.appendChild(this._createChevron());e=this.dom.find(".lh-audit-group__header",d);const f=this._clumpTitles[a];this.dom.find(".lh-audit-group__title",e).textContent=f;c&&(c=this.dom.convertMarkdownLinkSnippets(c),c.classList.add("lh-audit-group__description"),e.appendChild(c));c=this.dom.find(".lh-audit-group__itemcount",d);c.textContent=`(${b.length})`;b=b.map(this.renderAudit.bind(this));d.append(...b);
d.classList.add(`lh-clump--${a.toLowerCase()}`);return d}setTemplateContext(a){this.templateContext=a;this.detailsRenderer.setTemplateContext(a)}renderScoreGauge(a){const b=this.dom.cloneTemplate("#tmpl-lh-gauge",this.templateContext),c=this.dom.find("a.lh-gauge__wrapper",b);c.href=`#${a.id}`;Util.isPluginCategory(a.id)&&c.classList.add("lh-gauge__wrapper--plugin");var d=Number(a.score),e=this.dom.find(".lh-gauge",b);(e=this.dom.find("circle.lh-gauge-arc",e))&&this._setGaugeArc(e,d);d=Math.round(100*
d);e=this.dom.find("div.lh-gauge__percentage",b);e.textContent=d.toString();null===a.score&&(e.textContent="?",e.title=Util.i18n.strings.errorLabel);0===a.auditRefs.length||this.hasApplicableAudits(a)?c.classList.add(`lh-gauge__wrapper--${Util.calculateRating(a.score)}`):(c.classList.add("lh-gauge__wrapper--not-applicable"),e.textContent="-",e.title=Util.i18n.strings.notApplicableAuditsGroupTitle);this.dom.find(".lh-gauge__label",b).textContent=a.title;return b}hasApplicableAudits(a){return a.auditRefs.some(b=>
"notApplicable"!==b.result.scoreDisplayMode)}_setGaugeArc(a,b){const c=2*Math.PI*Number(a.getAttribute("r"));var d=Number(a.getAttribute("stroke-width"));const e=.25*d/c;a.style.transform=`rotate(${-90+360*e}deg)`;d=b*c-d/2;0===b&&(a.style.opacity="0");1===b&&(d=c);a.style.strokeDasharray=`${Math.max(d,0)} ${c}`}_auditHasWarning(a){return!(!a.result.warnings||!a.result.warnings.length)}_getClumpIdForAuditRef(a){const b=a.result.scoreDisplayMode;return"manual"===b||"notApplicable"===b?b:Util.showAsPassed(a.result)?
this._auditHasWarning(a)?"warning":"passed":"failed"}render(a,b={}){const c=this.dom.createElement("div","lh-category");this.createPermalinkSpan(c,a.id);c.appendChild(this.renderCategoryHeader(a,b));var d=new Map;d.set("failed",[]);d.set("warning",[]);d.set("manual",[]);d.set("passed",[]);d.set("notApplicable",[]);for(const e of a.auditRefs){const f=this._getClumpIdForAuditRef(e),g=d.get(f);g.push(e);d.set(f,g)}for(const [e,f]of d)0!==f.length&&("failed"===e?(d=this.renderUnexpandableClump(f,b),d.classList.add("lh-clump--failed"),
c.appendChild(d)):(d="manual"===e?a.manualDescription:void 0,d=this.renderClump(e,{auditRefs:f,description:d}),c.appendChild(d)));return c}createPermalinkSpan(a,b){a=this.dom.createChildOf(a,"span","lh-permalink");a.id=b}}"undefined"!==typeof module&&module.exports?module.exports=CategoryRenderer:self.CategoryRenderer=CategoryRenderer;/*
 Copyright 2020 The Lighthouse Authors. All Rights Reserved.
 Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0
 Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.
*/
class I18n{constructor(a,b){"en-XA"===a&&(a="de");this._numberDateLocale=a;this._numberFormatter=new Intl.NumberFormat(a);this._strings=b||{}}get strings(){return this._strings}formatNumber(a,b){b=void 0===b?.1:b;a=Math.round(a/b)*b;return this._numberFormatter.format(a)}formatBytesToKiB(a,b){b=void 0===b?.1:b;const c=this._byteFormatterForGranularity(b);a=c.format(Math.round(a/1024/b)*b);return`${a}${"\u00a0"}KiB`}formatBytes(a,b){b=void 0===b?1:b;const c=this._byteFormatterForGranularity(b);a=c.format(Math.round(a/
b)*b);return`${a}${"\u00a0"}bytes`}_byteFormatterForGranularity(a){let b=0;1>a&&(b=-Math.floor(Math.log10(a)));return new Intl.NumberFormat(this._numberDateLocale,Object.assign({},this._numberFormatter.resolvedOptions(),{maximumFractionDigits:b,minimumFractionDigits:b}))}formatMilliseconds(a,b){b=void 0===b?10:b;a=Math.round(a/b)*b;return 0===a?`${this._numberFormatter.format(0)}${"\u00a0"}ms`:`${this._numberFormatter.format(a)}${"\u00a0"}ms`}formatSeconds(a,b){b=void 0===b?.1:b;a=Math.round(a/1E3/
b)*b;return`${this._numberFormatter.format(a)}${"\u00a0"}s`}formatDateTime(a){const b={month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"numeric",timeZoneName:"short"};let c;try{c=new Intl.DateTimeFormat(this._numberDateLocale,b)}catch(d){b.timeZone="UTC",c=new Intl.DateTimeFormat(this._numberDateLocale,b)}return c.format(new Date(a))}formatDuration(a){let b=a/1E3;if(0===Math.round(b))return"None";const c=[],d={d:86400,h:3600,m:60,s:1};Object.keys(d).forEach(e=>{const f=d[e],g=Math.floor(b/
f);0<g&&(b-=g*f,c.push(`${g}\xa0${e}`))});return c.join(" ")}}"undefined"!==typeof module&&module.exports?module.exports=I18n:self.I18n=I18n;/*

 Copyright 2018 The Lighthouse Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS-IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
class PwaCategoryRenderer extends CategoryRenderer{render(a,b={}){const c=this.dom.createElement("div","lh-category");this.createPermalinkSpan(c,a.id);c.appendChild(this.renderCategoryHeader(a,b));var d=a.auditRefs;const e=d.filter(f=>"manual"!==f.result.scoreDisplayMode);b=this._renderAudits(e,b);c.appendChild(b);d=d.filter(f=>"manual"===f.result.scoreDisplayMode);a=this.renderClump("manual",{auditRefs:d,description:a.manualDescription});c.appendChild(a);return c}renderScoreGauge(a,b){if(null===
a.score)return super.renderScoreGauge(a,b);const c=this.dom.cloneTemplate("#tmpl-lh-gauge--pwa",this.templateContext),d=this.dom.find("a.lh-gauge--pwa__wrapper",c);d.href=`#${a.id}`;var e=c.querySelector("svg");if(!e)throw Error("no SVG element found in PWA score gauge template");PwaCategoryRenderer._makeSvgReferencesUnique(e);e=this._getGroupIds(a.auditRefs);const f=this._getPassingGroupIds(a.auditRefs);if(f.size===e.size)d.classList.add("lh-badged--all");else for(const g of f)d.classList.add(`lh-badged--${g}`);
this.dom.find(".lh-gauge__label",c).textContent=a.title;d.title=this._getGaugeTooltip(a.auditRefs,b);return c}_getGroupIds(a){a=a.map(b=>b.group).filter(b=>!!b);return new Set(a)}_getPassingGroupIds(a){const b=this._getGroupIds(a);for(const c of a)!Util.showAsPassed(c.result)&&c.group&&b.delete(c.group);return b}_getGaugeTooltip(a,b){var c=this._getGroupIds(a);const d=[];for(const f of c){var e=a.filter(k=>k.group===f);c=e.length;e=e.filter(k=>Util.showAsPassed(k.result)).length;const g=b[f].title;
d.push(`${g}: ${e}/${c}`)}return d.join(", ")}_renderAudits(a,b){b=this.renderUnexpandableClump(a,b);a=this._getPassingGroupIds(a);for(const c of a)a=this.dom.find(`.lh-audit-group--${c}`,b),a.classList.add("lh-badged");return b}static _makeSvgReferencesUnique(a){var b=a.querySelector("defs");if(b){var c=Util.getUniqueSuffix();b=b.querySelectorAll("[id]");for(const e of b){var d=e.id;b=`${d}-${c}`;e.id=b;const f=a.querySelectorAll(`use[href="#${d}"]`);for(const g of f)g.setAttribute("href",`#${b}`);
d=a.querySelectorAll(`[fill="url(#${d})"]`);for(const g of d)g.setAttribute("fill",`url(#${b})`)}}}}"undefined"!==typeof module&&module.exports?module.exports=PwaCategoryRenderer:self.PwaCategoryRenderer=PwaCategoryRenderer;class PerformanceCategoryRenderer extends CategoryRenderer{_renderMetric(a){var b=this.dom.cloneTemplate("#tmpl-lh-metric",this.templateContext);const c=this.dom.find(".lh-metric",b);c.id=a.result.id;var d=Util.calculateRating(a.result.score,a.result.scoreDisplayMode);c.classList.add(`lh-metric--${d}`);d=this.dom.find(".lh-metric__title",b);d.textContent=a.result.title;d=this.dom.find(".lh-metric__value",b);d.textContent=a.result.displayValue||"";b=this.dom.find(".lh-metric__description",b);b.appendChild(this.dom.convertMarkdownLinkSnippets(a.result.description));
"error"===a.result.scoreDisplayMode&&(b.textContent="",d.textContent="Error!",b=this.dom.createChildOf(b,"span"),b.textContent=a.result.errorMessage||"Report error: no metric information");return c}_renderOpportunity(a,b){var c=this.dom.cloneTemplate("#tmpl-lh-opportunity",this.templateContext);c=this.populateAuditValues(a,c);c.id=a.result.id;if(!a.result.details||"error"===a.result.scoreDisplayMode)return c;const d=a.result.details;if("opportunity"!==d.type)return c;const e=this.dom.find("span.lh-audit__display-text, div.lh-audit__display-text",
c);b=`${d.overallSavingsMs/b*100}%`;this.dom.find("div.lh-sparkline__bar",c).style.width=b;e.textContent=Util.i18n.formatSeconds(d.overallSavingsMs,.01);a.result.displayValue&&(a=a.result.displayValue,this.dom.find("div.lh-load-opportunity__sparkline",c).title=a,e.title=a);return c}_getWastedMs(a){if(a.result.details&&"opportunity"===a.result.details.type){a=a.result.details;if("number"!==typeof a.overallSavingsMs)throw Error("non-opportunity details passed to _getWastedMs");return a.overallSavingsMs}return Number.MIN_VALUE}_getScoringCalculatorHref(a){var b=
a.filter(e=>"metrics"===e.group),c=a.find(e=>"first-cpu-idle"===e.id);a=a.find(e=>"first-meaningful-paint"===e.id);c&&b.push(c);a&&b.push(a);const d={"cumulative-layout-shift":"CLS","first-contentful-paint":"FCP","first-cpu-idle":"FCI","first-meaningful-paint":"FMP",interactive:"TTI","largest-contentful-paint":"LCP","speed-index":"SI","total-blocking-time":"TBT"};b=b.map(e=>{let f;"number"===typeof e.result.numericValue?(f="cumulative-layout-shift"===e.id?Math.round(100*e.result.numericValue)/100:
Math.round(e.result.numericValue),f=f.toString()):f="null";return[d[e.id]||e.id,f]});b=[...b];Util.reportJson&&(b.push(["device",Util.reportJson.configSettings.formFactor]),b.push(["version",Util.reportJson.lighthouseVersion]));b=new URLSearchParams(b);c=new URL("https://googlechrome.github.io/lighthouse/scorecalc/");c.hash=b.toString();return c.href}render(a,b,c){var d=Util.i18n.strings;const e=this.dom.createElement("div","lh-category");"PSI"===c?(c=this.dom.createElement("div","lh-score__gauge"),
c.appendChild(this.renderScoreGauge(a,b)),e.appendChild(c)):(this.createPermalinkSpan(e,a.id),e.appendChild(this.renderCategoryHeader(a,b)));c=this.renderAuditGroup(b.metrics);var f=this.dom.cloneTemplate("#tmpl-lh-metrics-toggle",this.templateContext);const g=this.dom.find(".lh-metrics-toggle",f);c.append(...g.childNodes);f=a.auditRefs.filter(h=>"metrics"===h.group);const k=this.dom.createChildOf(c,"div","lh-metrics-container");f.forEach(h=>{k.appendChild(this._renderMetric(h))});f=this.dom.createChildOf(c,
"div","lh-metrics__disclaimer");const n=this.dom.convertMarkdownLinkSnippets(d.varianceDisclaimer);f.appendChild(n);f=this.dom.createChildOf(f,"a","lh-calclink");f.target="_blank";f.textContent=d.calculatorLink;f.href=this._getScoringCalculatorHref(a.auditRefs);c.classList.add("lh-audit-group--metrics");e.appendChild(c);c=this.dom.createChildOf(e,"div","lh-filmstrip-container");(f=(f=a.auditRefs.find(h=>"screenshot-thumbnails"===h.id))&&f.result)&&f.details&&(c.id=f.id,(f=this.detailsRenderer.render(f.details))&&
c.appendChild(f));const q=[];["performance-budget","timing-budget"].forEach(h=>{var p=a.auditRefs.find(t=>t.id===h);p&&p.result.details&&(p=this.detailsRenderer.render(p.result.details))&&(p.id=h,p.classList.add("lh-audit"),q.push(p))});if(0<q.length){const h=this.renderAuditGroup(b.budgets);q.forEach(p=>h.appendChild(p));h.classList.add("lh-audit-group--budgets");e.appendChild(h)}c=a.auditRefs.filter(h=>"load-opportunities"===h.group&&!Util.showAsPassed(h.result)).sort((h,p)=>this._getWastedMs(p)-
this._getWastedMs(h));if(c.length){f=c.map(t=>this._getWastedMs(t));f=Math.max(...f);const h=Math.max(1E3*Math.ceil(f/1E3),2E3),p=this.renderAuditGroup(b["load-opportunities"]);f=this.dom.cloneTemplate("#tmpl-lh-opportunity-header",this.templateContext);this.dom.find(".lh-load-opportunity__col--one",f).textContent=d.opportunityResourceColumnLabel;this.dom.find(".lh-load-opportunity__col--two",f).textContent=d.opportunitySavingsColumnLabel;d=this.dom.find(".lh-load-opportunity__header",f);p.appendChild(d);
c.forEach(t=>p.appendChild(this._renderOpportunity(t,h)));p.classList.add("lh-audit-group--load-opportunities");e.appendChild(p)}d=a.auditRefs.filter(h=>"diagnostics"===h.group&&!Util.showAsPassed(h.result)).sort((h,p)=>{h="informative"===h.result.scoreDisplayMode?100:Number(h.result.score);p="informative"===p.result.scoreDisplayMode?100:Number(p.result.score);return h-p});if(d.length){const h=this.renderAuditGroup(b.diagnostics);d.forEach(p=>h.appendChild(this.renderAudit(p)));h.classList.add("lh-audit-group--diagnostics");
e.appendChild(h)}d=a.auditRefs.filter(h=>("load-opportunities"===h.group||"diagnostics"===h.group)&&Util.showAsPassed(h.result));if(!d.length)return e;b={auditRefs:d,groupDefinitions:b};b=this.renderClump("passed",b);e.appendChild(b);return e}}"undefined"!==typeof module&&module.exports?module.exports=PerformanceCategoryRenderer:self.PerformanceCategoryRenderer=PerformanceCategoryRenderer;class ElementScreenshotRenderer{static getScreenshotPositions(a,b,c){var d={x:a.left+a.width/2,y:a.top+a.height/2};var e=d.x-b.width/2;var f=c.width-b.width;e=0>e?0:e>f?f:e;d=d.y-b.height/2;b=c.height-b.height;b=0>d?0:d>b?b:d;return{screenshot:{left:e,top:b},clip:{left:a.left-e,top:a.top-b}}}static renderClipPathInScreenshot(a,b,c,d,e){const f=a.find("clipPath",b);var g=`clip-${Util.getUniqueSuffix()}`;f.id=g;b.style.clipPath=`url(#${g})`;b=c.top/e.height;g=b+d.height/e.height;c=c.left/e.width;d=
c+d.width/e.width;d=[`0,0             1,0            1,${b}          0,${b}`,`0,${g}     1,${g}    1,1               0,1`,`0,${b}        ${c},${b} ${c},${g} 0,${g}`,`${d},${b} 1,${b}       1,${g}       ${d},${g}`];for(const k of d)f.append(a.createElementNS("http://www.w3.org/2000/svg","polygon",void 0,{points:k}))}static createBackgroundImageStyle(a,b){a=a.createElement("style");a.id="full-page-screenshot-style";a.textContent=`
      .lh-element-screenshot__image {
        background-image: url(${b.data})
      }`;return a}static _computeZoomFactor(a,b){a={x:b.width/a.width,y:b.height/a.height};a=.75*Math.min(a.x,a.y);return Math.min(1,a)}static render(a,b,c,d,e){if(!(d.left<=c.width&&0<=d.right&&d.top<=c.height&&0<=d.bottom))return null;b=a.cloneTemplate("#tmpl-lh-element-screenshot",b);b=a.find("div.lh-element-screenshot",b);b.dataset.rectWidth=d.width.toString();b.dataset.rectHeight=d.height.toString();b.dataset.rectLeft=d.left.toString();b.dataset.rectTop=d.top.toString();const f=this._computeZoomFactor(d,
e);e={width:e.width/f,height:e.height/f};e.width=Math.min(c.width,e.width);const g={width:e.width*f,height:e.height*f},k=ElementScreenshotRenderer.getScreenshotPositions(d,e,{width:c.width,height:c.height});var n=a.find("div.lh-element-screenshot__content",b);n.style.top=`-${g.height}px`;n=a.find("div.lh-element-screenshot__image",b);n.style.width=g.width+"px";n.style.height=g.height+"px";n.style.backgroundPositionY=-(k.screenshot.top*f)+"px";n.style.backgroundPositionX=-(k.screenshot.left*f)+"px";
n.style.backgroundSize=`${c.width*f}px ${c.height*f}px`;c=a.find("div.lh-element-screenshot__element-marker",b);c.style.width=d.width*f+"px";c.style.height=d.height*f+"px";c.style.left=k.clip.left*f+"px";c.style.top=k.clip.top*f+"px";c=a.find("div.lh-element-screenshot__mask",b);c.style.width=g.width+"px";c.style.height=g.height+"px";ElementScreenshotRenderer.renderClipPathInScreenshot(a,c,k.clip,d,e);return b}}
"undefined"!==typeof module&&module.exports?module.exports=ElementScreenshotRenderer:self.ElementScreenshotRenderer=ElementScreenshotRenderer;class ReportRenderer{constructor(a){this._dom=a;this._templateContext=this._dom.document()}setTemplateContext(a){this._templateContext=a}_renderReportTopbar(a){const b=this._dom.cloneTemplate("#tmpl-lh-topbar",this._templateContext),c=this._dom.find("a.lh-topbar__url",b);c.href=c.textContent=a.finalUrl;c.title=a.finalUrl;return b}_renderReportHeader(){const a=this._dom.cloneTemplate("#tmpl-lh-heading",this._templateContext),b=this._dom.cloneTemplate("#tmpl-lh-scores-wrapper",this._templateContext),
c=this._dom.find(".lh-scores-wrapper-placeholder",a);c.replaceWith(b);return a}_renderReportFooter(a){const b=this._dom.cloneTemplate("#tmpl-lh-footer",this._templateContext),c=this._dom.find(".lh-env__items",b);c.id="runtime-settings";this._dom.find(".lh-env__title",b).textContent=Util.i18n.strings.runtimeSettingsTitle;var d=Util.getEnvironmentDisplayValues(a.configSettings||{});d=[{name:Util.i18n.strings.runtimeSettingsUrl,description:a.finalUrl},{name:Util.i18n.strings.runtimeSettingsFetchTime,
description:Util.i18n.formatDateTime(a.fetchTime)},...d,{name:Util.i18n.strings.runtimeSettingsChannel,description:a.configSettings.channel},{name:Util.i18n.strings.runtimeSettingsUA,description:a.userAgent},{name:Util.i18n.strings.runtimeSettingsUANetwork,description:a.environment&&a.environment.networkUserAgent},{name:Util.i18n.strings.runtimeSettingsBenchmark,description:a.environment&&a.environment.benchmarkIndex.toFixed(0)}];a.environment.credits&&a.environment.credits["axe-core"]&&d.push({name:Util.i18n.strings.runtimeSettingsAxeVersion,
description:a.environment.credits["axe-core"]});for(const e of d)e.description&&(d=this._dom.cloneTemplate("#tmpl-lh-env__items",c),this._dom.find(".lh-env__name",d).textContent=e.name,this._dom.find(".lh-env__description",d).textContent=e.description,c.appendChild(d));this._dom.find(".lh-footer__version_issue",b).textContent=Util.i18n.strings.footerIssue;this._dom.find(".lh-footer__version",b).textContent=a.lighthouseVersion;return b}_renderReportWarnings(a){if(!a.runWarnings||0===a.runWarnings.length)return this._dom.createElement("div");
const b=this._dom.cloneTemplate("#tmpl-lh-warnings--toplevel",this._templateContext);var c=this._dom.find(".lh-warnings__msg",b);c.textContent=Util.i18n.strings.toplevelWarningsMessage;c=this._dom.find("ul",b);for(const d of a.runWarnings)a=c.appendChild(this._dom.createElement("li")),a.appendChild(this._dom.convertMarkdownLinkSnippets(d));return b}_renderScoreGauges(a,b,c){const d=[],e=[],f=[];for(const g of Object.values(a.categories)){const k=c[g.id]||b,n=k.renderScoreGauge(g,a.categoryGroups||
{});Util.isPluginCategory(g.id)?f.push(n):k.renderScoreGauge===b.renderScoreGauge?d.push(n):e.push(n)}return[...d,...e,...f]}_renderReport(a){var b=new I18n(a.configSettings.locale,Object.assign({},Util.UIStrings,a.i18n.rendererFormattedStrings));Util.i18n=b;Util.reportJson=a;b=a.audits["full-page-screenshot"]&&a.audits["full-page-screenshot"].details&&"full-page-screenshot"===a.audits["full-page-screenshot"].details.type?a.audits["full-page-screenshot"].details:void 0;var c=new DetailsRenderer(this._dom,
{fullPageScreenshot:b});b=b&&ElementScreenshotRenderer.createBackgroundImageStyle(this._dom,b.screenshot);var d=new CategoryRenderer(this._dom,c);d.setTemplateContext(this._templateContext);const e={performance:new PerformanceCategoryRenderer(this._dom,c),pwa:new PwaCategoryRenderer(this._dom,c)};Object.values(e).forEach(p=>{p.setTemplateContext(this._templateContext)});c=this._dom.createElement("div");c.appendChild(this._renderReportHeader());const f=this._dom.createElement("div","lh-container"),
g=this._dom.createElement("div","lh-report");g.appendChild(this._renderReportWarnings(a));var k,n=1===Object.keys(a.categories).length;n?c.classList.add("lh-header--solo-category"):k=this._dom.createElement("div","lh-scores-header");if(k){n=this._dom.cloneTemplate("#tmpl-lh-scorescale",this._templateContext);var q=this._dom.find(".lh-scores-container",c);k.append(...this._renderScoreGauges(a,d,e));q.appendChild(k);q.appendChild(n);k=this._dom.createElement("div","lh-sticky-header");k.append(...this._renderScoreGauges(a,
d,e));f.appendChild(k)}k=g.appendChild(this._dom.createElement("div","lh-categories"));for(var h of Object.values(a.categories))n=e[h.id]||d,q=n.dom.createChildOf(k,"div","lh-category-wrapper"),q.appendChild(n.render(h,a.categoryGroups));h=this._dom.createFragment();d=this._renderReportTopbar(a);h.appendChild(d);h.appendChild(f);f.appendChild(c);f.appendChild(g);b&&f.appendChild(b);g.appendChild(this._renderReportFooter(a));return h}}
"undefined"!==typeof module&&module.exports?module.exports=ReportRenderer:self.ReportRenderer=ReportRenderer;/*
 Copyright 2019 The Lighthouse Authors. All Rights Reserved.
 Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0
 Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.
*/
const LineVisibility={ALWAYS:0,WHEN_COLLAPSED:1,WHEN_EXPANDED:2},LineContentType={CONTENT_NORMAL:0,CONTENT_HIGHLIGHTED:1,PLACEHOLDER:2,MESSAGE:3},classNamesByContentType={[LineContentType.CONTENT_NORMAL]:["lh-snippet__line--content"],[LineContentType.CONTENT_HIGHLIGHTED]:["lh-snippet__line--content","lh-snippet__line--content-highlighted"],[LineContentType.PLACEHOLDER]:["lh-snippet__line--placeholder"],[LineContentType.MESSAGE]:["lh-snippet__line--message"]};
function getLineAndPreviousLine(a,b){return{line:a.find(c=>c.lineNumber===b),previousLine:a.find(c=>c.lineNumber===b-1)}}function getMessagesForLineNumber(a,b){return a.filter(c=>c.lineNumber===b)}
class SnippetRenderer{static renderHeader(a,b,c,d,e){var f=Util.filterRelevantLines(c.lines,c.lineMessages,2);f=f.length<c.lines.length;b=a.cloneTemplate("#tmpl-lh-snippet__header",b);a.find(".lh-snippet__title",b).textContent=c.title;const {snippetCollapseButtonLabel:g,snippetExpandButtonLabel:k}=Util.i18n.strings;a.find(".lh-snippet__btn-label-collapse",b).textContent=g;a.find(".lh-snippet__btn-label-expand",b).textContent=k;const n=a.find(".lh-snippet__toggle-expand",b);f?n.addEventListener("click",
()=>e()):n.remove();c.node&&a.isDevTools()&&(a=a.find(".lh-snippet__node",b),a.appendChild(d.renderNode(c.node)));return b}static renderSnippetLine(a,b,{content:c,lineNumber:d,truncated:e,contentType:f,visibility:g}){b=a.cloneTemplate("#tmpl-lh-snippet__line",b);b=a.find(".lh-snippet__line",b);const {classList:k}=b;classNamesByContentType[f].forEach(n=>k.add(n));g===LineVisibility.WHEN_COLLAPSED?k.add("lh-snippet__show-if-collapsed"):g===LineVisibility.WHEN_EXPANDED&&k.add("lh-snippet__show-if-expanded");
c+=e?"\u2026":"";e=a.find(".lh-snippet__line code",b);f===LineContentType.MESSAGE?e.appendChild(a.convertMarkdownLinkSnippets(c)):e.textContent=c;a.find(".lh-snippet__line-number",b).textContent=d.toString();return b}static renderMessage(a,b,c){return SnippetRenderer.renderSnippetLine(a,b,{lineNumber:" ",content:c.message,contentType:LineContentType.MESSAGE})}static renderOmittedLinesPlaceholder(a,b,c){return SnippetRenderer.renderSnippetLine(a,b,{lineNumber:"\u2026",content:"",visibility:c,contentType:LineContentType.PLACEHOLDER})}static renderSnippetContent(a,
b,c){const d=a.cloneTemplate("#tmpl-lh-snippet__content",b),e=a.find(".lh-snippet__snippet-inner",d);c.generalMessages.forEach(f=>e.append(SnippetRenderer.renderMessage(a,b,f)));e.append(SnippetRenderer.renderSnippetLines(a,b,c));return d}static renderSnippetLines(a,b,c){const {lineMessages:d,generalMessages:e,lineCount:f,lines:g}=c;c=Util.filterRelevantLines(c.lines,c.lineMessages,2);const k=0<e.length&&0===d.length,n=a.createFragment();var q=!1;for(let t=1;t<=f;t++){const {line:v,previousLine:A}=
getLineAndPreviousLine(g,t),{line:l,previousLine:m}=getLineAndPreviousLine(c,t);var h=!!l,p=!!m;p&&!h&&(q=!0);h&&q&&(n.append(SnippetRenderer.renderOmittedLinesPlaceholder(a,b,LineVisibility.WHEN_COLLAPSED)),q=!1);h=!v&&!!A;p=!v&&1===t;if(h||p)q=(q=!c.some(r=>r.lineNumber>t))||1===t,n.append(SnippetRenderer.renderOmittedLinesPlaceholder(a,b,q?LineVisibility.WHEN_EXPANDED:LineVisibility.ALWAYS)),q=!1;v&&(h=getMessagesForLineNumber(d,t),p=0<h.length||k,p=Object.assign({},v,{contentType:p?LineContentType.CONTENT_HIGHLIGHTED:
LineContentType.CONTENT_NORMAL,visibility:l?LineVisibility.ALWAYS:LineVisibility.WHEN_EXPANDED}),n.append(SnippetRenderer.renderSnippetLine(a,b,p)),h.forEach(r=>{n.append(SnippetRenderer.renderMessage(a,b,r))}))}return n}static render(a,b,c,d){b=a.cloneTemplate("#tmpl-lh-snippet",b);const e=a.find(".lh-snippet",b);d=SnippetRenderer.renderHeader(a,b,c,d,()=>e.classList.toggle("lh-snippet--expanded"));a=SnippetRenderer.renderSnippetContent(a,b,c);e.append(d,a);return e}}
"undefined"!==typeof module&&module.exports?module.exports=SnippetRenderer:self.SnippetRenderer=SnippetRenderer;function prepareLabData(a,b){a="string"===typeof a?JSON.parse(a):a;b=new DOM(b);b.resetTemplates();a=Util.prepareReportResult(a);var c=new I18n(a.configSettings.locale,Object.assign({},Util.UIStrings,a.i18n.rendererFormattedStrings));Util.i18n=c;var d=a.categories.performance;if(!d)throw Error("No performance category. Can't make lab data section");if(!a.categoryGroups)throw Error("No category groups found.");a.categoryGroups.metrics.title=Util.i18n.strings.labDataTitle;a.categoryGroups.metrics.description=
Util.i18n.strings.lsPerformanceCategoryDescription;c=new PerformanceCategoryRenderer(b,new DetailsRenderer(b));a=c.render(d,a.categoryGroups,"PSI");c=b.find(".lh-score__gauge",a);c.remove();var e=b.find(".lh-gauge__wrapper",c);e.classList.add("lh-gauge__wrapper--huge");e.removeAttribute("href");d=_getFinalScreenshot(d);e=b.cloneTemplate("#tmpl-lh-scorescale",b.document());b=b.find(".lh-scorescale",e);return{scoreGaugeEl:c,perfCategoryEl:a,finalScreenshotDataUri:d,scoreScaleEl:b}}
function _getFinalScreenshot(a){a=a.auditRefs.find(b=>"final-screenshot"===b.id);return a&&a.result&&"error"!==a.result.scoreDisplayMode?(a=a.result.details)&&"screenshot"===a.type?a.data:null:null}"undefined"!==typeof module&&module.exports?module.exports=prepareLabData:self.prepareLabData=prepareLabData;
